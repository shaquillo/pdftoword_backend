document.getElementById('pf1').onclick = function clickEvent(e) { if(!inputs.includes(e.target.id) && !e.target.classList.contains('t')){ var rect = document.getElementById('pf1').getBoundingClientRect();let x = e.clientX - rect.left;let y = e.clientY - rect.top;console.log('Left? : ' + x + ' ; Top? : ' + y + '.');const errorElem = document.createElement('input');errorElem.style.top = y.toString()+'px';errorElem.style.left =x.toString()+'px';errorElem.style.position = 'absolute';errorElem.id = 'input' + i;errorElem.value = '';i+=1;const divElem = document.createElement('div');function createDiv(){if(document.getElementById(errorElem.id).value !== ''){divElem.style.top = errorElem.style.top;divElem.style.left = errorElem.style.left;divElem.style.position = 'absolute';divElem.id = errorElem.id;divElem.innerHTML = errorElem.value;divElem.onclick = function(e){divElem.draggable = 'false';divElem.contentEditable = 'true';}divElem.onmousemove = function(e){if(document.activeElement !== divElem){divElem.draggable = 'true';divElem.contentEditable = 'false';}}document.getElementById('pf1').appendChild(divElem);function drag_start(event) {var style = window.getComputedStyle(event.target, null);event.dataTransfer.setData('text/plain',(parseInt(style.getPropertyValue('left'),10) - event.clientX) + ',' + (parseInt(style.getPropertyValue('top'),10) - event.clientY) +  ',' + divElem.id);} function drag_over(event) { event.preventDefault(); return false; } function drop(event) { var offset = event.dataTransfer.getData('text/plain').split(',');console.log(offset)var elem = document.getElementById(offset[2]);elem.style.left = (event.clientX + parseInt(offset[0],10)) + 'px';elem.style.top = (event.clientY + parseInt(offset[1],10)) + 'px';event.preventDefault();return false;} divElem.addEventListener('dragstart',drag_start,false); document.body.addEventListener('dragover',drag_over,false); document.body.addEventListener('drop',drop,false); }errorElem.remove();} errorElem.onblur = (e) => {createDiv();}errorElem.addEventListener('keydown', (e) =>{if(e.key === 'Enter'){createDiv();}}); errorElem.addEventListener('input', resizeInput);resizeInput.call(errorElem);function resizeInput() {this.style.width = this.value.length + 'ch';}document.getElementById('pf1').appendChild(errorElem);inputs.push(errorElem.id);}};

document.getElementById('pf1').onclick = function clickEvent(e) { if(!inputs.includes(e.target.id) && !e.target.classList.contains('t')){var rect = document.getElementById('pf1').getBoundingClientRect();let x = e.clientX - rect.left;let y = e.clientY - rect.top;const errorElem = document.createElement('input');errorElem.style.top = y.toString()+'px';errorElem.style.left =x.toString()+'px';errorElem.style.position = 'absolute';errorElem.placeholder = 'enter text';errorElem.id = "input" + i;errorElem.value = '';i += 1;const divElem = document.createElement('div');function createDiv(){if(document.getElementById(errorElem.id).value !== ''){divElem.style.top = errorElem.style.top;divElem.style.left = errorElem.style.left;divElem.style.position = 'absolute';divElem.id = errorElem.id;divElem.innerHTML = errorElem.value;divElem.onclick = function(e){divElem.draggable = 'false';divElem.contentEditable = 'true';}divElem.onmousemove = function(e){if(document.activeElement !== divElem){divElem.draggable = 'true';divElem.contentEditable = 'false';}}document.getElementById('pf1').appendChild(divElem);function drag_start(event) {var style = window.getComputedStyle(event.target, null);event.dataTransfer.setData("text/plain",(parseInt(style.getPropertyValue("left"),10) - event.clientX) + ',' + (parseInt(style.getPropertyValue("top"),10) - event.clientY) +  ',' + divElem.id);} function drag_over(event) { event.preventDefault(); return false; } function drop(event) { var offset = event.dataTransfer.getData("text/plain").split(',');console.log(offset)var elem = document.getElementById(offset[2]);elem.style.left = (event.clientX + parseInt(offset[0],10)) + 'px';elem.style.top = (event.clientY + parseInt(offset[1],10)) + 'px';event.preventDefault();return false;}}errorElem.remove();}errorElem.onblur = (e) => {createDiv();};errorElem.addEventListener('keydown', (e) =>{if(e.key === 'Enter'){createDiv();}});errorElem.addEventListener('input', resizeInput); resizeInput.call(errorElem); function resizeInput() {this.style.width = this.value.length + "ch";}document.getElementById('pf1').appendChild(errorElem);inputs.push(errorElem.id);}}
